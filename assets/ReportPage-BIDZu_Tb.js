import{r as s,g as z,j as e,s as A}from"./index-Dp4w8mxu.js";import{b as I}from"./geminiService-DONQNEpP.js";const M=()=>{const[v,i]=s.useState(""),[g,r]=s.useState(""),[f,c]=s.useState(!1),[a,d]=s.useState(null),[h,o]=s.useState(""),[k,u]=s.useState("Dog"),[N,x]=s.useState(""),[b,p]=s.useState(!1),n=s.useRef(null),y=s.useRef(null),m=z(),w=10*1024*1024,F=()=>{if(!navigator.geolocation){r("Geolocation is not supported by your browser.");return}c(!0),r("Locating..."),navigator.geolocation.getCurrentPosition(t=>{r("Location found!"),i(`${t.coords.latitude.toFixed(5)}, ${t.coords.longitude.toFixed(5)}`),c(!1)},()=>{r("Unable to retrieve your location. Please enter it manually."),c(!1)})},C=t=>{var j;const l=(j=t.target.files)==null?void 0:j[0];l&&(l.size>w?(o("File is too large. Please select a file under 10MB."),d(null),n.current&&(n.current.value="")):(o(""),d(l)))},S=async()=>{if(!a){o("Please select an image first.");return}if(!a.type.startsWith("image/")){o("Analysis is only available for images.");return}p(!0);try{const t=await I(a);t.type&&u(t.type),t.condition&&x(t.condition),m.success("Image analyzed successfully! Details updated.")}catch(t){console.error(t),m.error("Failed to analyze image. Please fill details manually.")}finally{p(!1)}},R=t=>{var l;t.preventDefault(),m.success("Thank you! Your rescue report has been submitted."),i(""),r(""),d(null),o(""),x(""),u("Dog"),(l=y.current)==null||l.reset(),n.current&&(n.current.value="")};return e.jsx("div",{className:"container mx-auto px-4 py-12 flex-grow flex items-center justify-center animate-fade-in",children:e.jsxs("div",{className:"w-full max-w-2xl glass-card p-8 md:p-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-center text-slate-800 dark:text-white mb-4",children:"Report a Rescue"}),e.jsx("p",{className:"text-lg text-center text-slate-700 dark:text-slate-200 mb-10",children:"See an animal that needs help? Fill out the form below, and our rescue team will be alerted."}),e.jsxs("form",{ref:y,onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Upload Photo/Video"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsx("input",{type:"file",id:"file-upload",ref:n,onChange:C,accept:"image/*,video/*",className:"hidden"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"Choose File"}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:[a&&e.jsx("p",{children:a.name}),!a&&e.jsx("p",{children:"No file selected."})]})]}),a&&a.type.startsWith("image/")&&e.jsx("button",{type:"button",onClick:S,disabled:b,className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-300 text-sm font-bold py-2 px-3 rounded-lg hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors flex items-center",children:b?e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse mr-2"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Auto-Fill with AI"]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 ml-1",children:"Max file size: 10MB. Videos and images are accepted."}),h&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:h})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"animal-type",className:"block text-base font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Type of Animal"}),e.jsxs("select",{id:"animal-type",value:k,onChange:t=>u(t.target.value),required:!0,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white/50 dark:bg-slate-700/50 dark:text-slate-200",children:[e.jsx("option",{children:"Dog"}),e.jsx("option",{children:"Cat"}),e.jsx("option",{children:"Bird"}),e.jsx("option",{children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"condition",className:"block text-base font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Description of Condition"}),e.jsx("textarea",{id:"condition",rows:4,required:!0,value:N,onChange:t=>x(t.target.value),placeholder:"e.g., Injured leg, looks lost and scared, etc.",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white/50 dark:bg-slate-700/50 dark:text-slate-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-base font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"Location (Address or Coordinates)"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("input",{type:"text",id:"location",value:v,onChange:t=>i(t.target.value),required:!0,placeholder:"e.g., Near City Park, 123 Main St",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white/50 dark:bg-slate-700/50 dark:text-slate-200"}),e.jsxs("button",{type:"button",onClick:F,disabled:f,className:"flex items-center justify-center bg-slate-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 transition-colors disabled:bg-slate-400",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),f?"Locating...":"Use My Location"]})]}),g&&e.jsx("p",{role:"status",className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:g})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full bg-orange-500 text-white font-bold py-4 px-4 rounded-lg text-lg hover:bg-orange-600 transition-colors transform hover:scale-105",children:"Submit Rescue Report"})})]})]})})};export{M as default};
