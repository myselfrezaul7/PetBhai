import{j as e,o as b,p as u,a as f,r as m,L as h,I as j}from"./index-Dp4w8mxu.js";import{a as N}from"./geminiService-DONQNEpP.js";const w=({content:i})=>{const r=[],x=i.split(`
`);let a=!1,n=[];const d=c=>c.split(/\*\*(.*?)\*\*/g).map((t,l)=>l%2===1?e.jsx("strong",{children:t},l):t),o=()=>{n.length>0&&(r.push(e.jsx("ul",{className:"list-disc pl-5 my-4 space-y-2",children:n},`ul-${r.length}`)),n=[]),a=!1};return x.forEach((c,t)=>{const l=c.trim();l.startsWith("* ")?(a||(a=!0),n.push(e.jsx("li",{children:d(l.substring(2))},t))):(a&&o(),l&&(l.startsWith("**")&&l.endsWith("**")?r.push(e.jsx("h2",{className:"text-xl md:text-2xl font-bold mt-6 md:mt-8 mb-3 md:mb-4",children:d(l.substring(2,l.length-2))},t)):r.push(e.jsx("p",{className:"mb-4 text-base md:text-lg leading-relaxed break-words",children:d(l)},t))))}),a&&o(),e.jsx("div",{className:"prose prose-base md:prose-lg lg:prose-xl max-w-none text-slate-800 dark:text-slate-200 prose-strong:font-bold prose-headings:text-slate-800 dark:prose-headings:text-slate-100 break-words",children:r})},y=()=>{const{id:i}=b(),{articles:r,updateArticleImage:x}=u(),{t:a}=f(),[n,d]=m.useState(!1),[o,c]=m.useState(""),t=m.useMemo(()=>r.find(s=>s.id===Number(i)),[i,r]),l=m.useMemo(()=>r.filter(s=>s.id!==Number(i)).sort((s,g)=>new Date(g.date).getTime()-new Date(s.date).getTime()).slice(0,3),[r,i]),p=async()=>{if(t){d(!0),c("");try{const s=`একটি প্রাণবন্ত, বাস্তবসম্মত ছবি যা "${t.title}" শিরোনামের একটি ব্লগ পোস্টের জন্য উপযুক্ত। ছবিটি একটি পশু কল্যাণ সংস্থার ব্লগের জন্য মানানসই হতে হবে।`,g=await N(s);x(t.id,g)}catch(s){console.error(s),c(s instanceof Error?s.message:"An unknown error occurred.")}finally{d(!1)}}};return t?e.jsx("div",{className:"container mx-auto px-4 md:px-6 py-8 md:py-12 animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h1",{className:"text-2xl md:text-4xl lg:text-5xl font-extrabold text-slate-800 dark:text-white leading-tight",children:t.title}),e.jsxs("div",{className:"mt-4 text-slate-600 dark:text-slate-300 border-y border-slate-300/50 dark:border-slate-600/50 py-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm md:text-base",children:[e.jsxs("span",{className:"whitespace-nowrap",children:[a("article_written_by")," ",e.jsx("strong",{children:t.author})]}),e.jsx("span",{className:"text-slate-400",children:"•"}),e.jsx("span",{className:"whitespace-nowrap",children:new Date(t.date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("span",{className:"text-slate-400",children:"•"}),e.jsxs("span",{className:"whitespace-nowrap",children:[t.readTime," ",a("blog_min_read")]})]})]}),e.jsx("div",{className:"w-full h-auto max-h-[500px] rounded-2xl shadow-lg mb-8 overflow-hidden bg-slate-200 dark:bg-slate-700",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full min-h-[300px] h-full flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(j,{className:"w-16 h-16 md:w-24 md:h-24 text-slate-400 dark:text-slate-500 mb-4"}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-slate-700 dark:text-slate-200",children:a("article_generate_image")}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mt-2 mb-4 text-sm md:text-base",children:a("article_generate_image_desc")}),e.jsx("button",{onClick:p,disabled:n,className:"bg-orange-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-orange-600 transition-colors disabled:bg-orange-300 disabled:cursor-wait text-sm md:text-base",children:a(n?"btn_generating":"btn_generate_ai")}),n&&e.jsx("div",{className:"mt-4 w-full max-w-xs bg-slate-300 dark:bg-slate-600 h-1 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-orange-500 h-1 animate-pulse w-full"})}),o&&e.jsx("p",{className:"text-red-500 mt-4 text-sm",children:o})]})}),e.jsx("div",{className:"glass-card p-4 md:p-8 bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm",children:e.jsx(w,{content:t.content})})]}),e.jsx("aside",{className:"lg:col-span-1 mt-8 lg:mt-0",children:e.jsxs("div",{className:"lg:sticky lg:top-24",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 dark:text-white mb-4 md:mb-6 pb-3 border-b-2 border-orange-500/50",children:a("recent_articles")}),e.jsx("div",{className:"space-y-4 md:space-y-6",children:l.map(s=>e.jsx(h,{to:`/blog/${s.id}`,className:"block group glass-card p-3 hover:bg-white/80 dark:hover:bg-slate-800/80 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0 overflow-hidden rounded-lg bg-slate-200 dark:bg-slate-700",children:e.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover transition-transform group-hover:scale-110",loading:"lazy"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white group-hover:text-orange-600 transition-colors line-clamp-2 text-sm md:text-base",children:s.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:new Date(s.date).toLocaleDateString("en-GB",{month:"long",day:"numeric"})})]})]})},s.id))})]})})]})}):e.jsx("div",{className:"text-center py-20 animate-fade-in container mx-auto px-4 md:px-6",children:e.jsxs("div",{className:"glass-card p-8 md:p-12",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white",children:a("article_not_found")}),e.jsx("p",{className:"text-slate-700 dark:text-slate-200 mt-4",children:a("article_not_found_desc")}),e.jsx(h,{to:"/blog",className:"mt-8 inline-block bg-orange-500 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-orange-600 transition-colors",children:a("btn_back_blog")})]})})};export{y as default};
