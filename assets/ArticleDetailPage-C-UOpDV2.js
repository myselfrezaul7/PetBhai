import{j as e,m as f,n as j,b as N,r as x,P as w,L as p,I as v}from"./index-CQUF4EdN.js";import{g as k}from"./geminiService-BNAxK55b.js";const y=({content:c})=>{const r=[],g=c.split(`
`);let i=!1,d=[];const s=m=>m.split(/\*\*(.*?)\*\*/g).map((n,a)=>a%2===1?e.jsx("strong",{children:n},a):n),o=()=>{d.length>0&&(r.push(e.jsx("ul",{className:"list-disc pl-5 my-4 space-y-2",children:d},`ul-${r.length}`)),d=[]),i=!1};return g.forEach((m,n)=>{const a=m.trim();a.startsWith("* ")?(i||(i=!0),d.push(e.jsx("li",{children:s(a.substring(2))},n))):(i&&o(),a&&(a.startsWith("**")&&a.endsWith("**")?r.push(e.jsx("h2",{className:"text-xl md:text-2xl font-bold mt-6 md:mt-8 mb-3 md:mb-4",children:s(a.substring(2,a.length-2))},n)):r.push(e.jsx("p",{className:"mb-4 text-base md:text-lg leading-relaxed break-words",children:s(a)},n))))}),i&&o(),e.jsx("div",{className:"prose prose-base md:prose-lg lg:prose-xl max-w-none text-slate-800 dark:text-slate-200 prose-strong:font-bold prose-headings:text-slate-800 dark:prose-headings:text-slate-100 break-words",children:r})},I=()=>{const{id:c}=f(),{articles:r,updateArticleImage:g,loading:i,error:d}=j(),{t:s}=N(),[o,m]=x.useState(!1),[n,a]=x.useState(""),l=x.useMemo(()=>r.find(t=>t.id===Number(c)),[c,r]),b=x.useMemo(()=>r.filter(t=>t.id!==Number(c)).sort((t,h)=>new Date(h.date).getTime()-new Date(t.date).getTime()).slice(0,3),[r,c]),u=async()=>{if(l){m(!0),a("");try{const t=`একটি প্রাণবন্ত, বাস্তবসম্মত ছবি যা "${l.title}" শিরোনামের একটি ব্লগ পোস্টের জন্য উপযুক্ত। ছবিটি একটি পশু কল্যাণ সংস্থার ব্লগের জন্য মানানসই হতে হবে।`,h=await k(t);g(l.id,h)}catch(t){console.error(t),a(t instanceof Error?t.message:"An unknown error occurred.")}finally{m(!1)}}};return i?e.jsxs("div",{className:"flex justify-center items-center h-96",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-orange-500"}),e.jsx(w,{className:"absolute w-8 h-8 text-orange-500 animate-pulse"})]}):d?e.jsxs("div",{className:"container mx-auto px-6 py-16 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Article"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:d})]}):l?e.jsx("div",{className:"container mx-auto px-4 md:px-6 py-8 md:py-12 animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h1",{className:"text-2xl md:text-4xl lg:text-5xl font-extrabold text-slate-800 dark:text-white leading-tight",children:l.title}),e.jsxs("div",{className:"mt-4 text-slate-600 dark:text-slate-300 border-y border-slate-300/50 dark:border-slate-600/50 py-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm md:text-base",children:[e.jsxs("span",{className:"whitespace-nowrap",children:[s("article_written_by")," ",e.jsx("strong",{children:l.author})]}),e.jsx("span",{className:"text-slate-400",children:"•"}),e.jsx("span",{className:"whitespace-nowrap",children:new Date(l.date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("span",{className:"text-slate-400",children:"•"}),e.jsxs("span",{className:"whitespace-nowrap",children:[l.readTime," ",s("blog_min_read")]})]})]}),e.jsx("div",{className:"w-full h-auto max-h-[500px] rounded-2xl shadow-lg mb-8 overflow-hidden bg-slate-200 dark:bg-slate-700",children:l.imageUrl?e.jsx("img",{src:l.imageUrl,alt:l.title,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full min-h-[300px] h-full flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(v,{className:"w-16 h-16 md:w-24 md:h-24 text-slate-400 dark:text-slate-500 mb-4"}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-slate-700 dark:text-slate-200",children:s("article_generate_image")}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mt-2 mb-4 text-sm md:text-base",children:s("article_generate_image_desc")}),e.jsx("button",{onClick:u,disabled:o,className:"bg-orange-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-orange-600 transition-colors disabled:bg-orange-300 disabled:cursor-wait text-sm md:text-base",children:s(o?"btn_generating":"btn_generate_ai")}),o&&e.jsx("div",{className:"mt-4 w-full max-w-xs bg-slate-300 dark:bg-slate-600 h-1 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-orange-500 h-1 animate-pulse w-full"})}),n&&e.jsx("p",{className:"text-red-500 mt-4 text-sm",children:n})]})}),e.jsx("div",{className:"glass-card p-4 md:p-8 bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm",children:e.jsx(y,{content:l.content})})]}),e.jsx("aside",{className:"lg:col-span-1 mt-8 lg:mt-0",children:e.jsxs("div",{className:"lg:sticky lg:top-24",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 dark:text-white mb-4 md:mb-6 pb-3 border-b-2 border-orange-500/50",children:s("recent_articles")}),e.jsx("div",{className:"space-y-4 md:space-y-6",children:b.map(t=>e.jsx(p,{to:`/blog/${t.id}`,className:"block group glass-card p-3 hover:bg-white/80 dark:hover:bg-slate-800/80 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0 overflow-hidden rounded-lg bg-slate-200 dark:bg-slate-700",children:e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover transition-transform group-hover:scale-110",loading:"lazy"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white group-hover:text-orange-600 transition-colors line-clamp-2 text-sm md:text-base",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:new Date(t.date).toLocaleDateString("en-GB",{month:"long",day:"numeric"})})]})]})},t.id))})]})})]})}):e.jsx("div",{className:"text-center py-20 animate-fade-in container mx-auto px-4 md:px-6",children:e.jsxs("div",{className:"glass-card p-8 md:p-12",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white",children:s("article_not_found")}),e.jsx("p",{className:"text-slate-700 dark:text-slate-200 mt-4",children:s("article_not_found_desc")}),e.jsx(p,{to:"/blog",className:"mt-8 inline-block bg-orange-500 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-orange-600 transition-colors",children:s("btn_back_blog")})]})})};export{I as default};
