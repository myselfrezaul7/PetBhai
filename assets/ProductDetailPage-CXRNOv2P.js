import{m as E,f as T,u as q,r as a,g as H,b as _,M as z,j as e,L as S,i as F,H as O}from"./index-DDIVCFFy.js";import{P as U}from"./ProductCard-DFkx4yAV.js";const K=()=>{const{id:u}=E(),R=T(),{products:n,addProductReview:M}=q(),t=a.useMemo(()=>n.find(s=>s.id===Number(u)),[u,n]),{addToCart:A,cartItems:g}=H(),{isAuthenticated:b,currentUser:r,addToWishlist:P,removeFromWishlist:I}=_(),[j,p]=a.useState(!1),[c,f]=a.useState(0),[x,v]=a.useState(""),[N,o]=a.useState(""),m=a.useMemo(()=>z.find(s=>s.id===(t==null?void 0:t.brandId)),[t]),h=a.useMemo(()=>(r==null?void 0:r.wishlist.includes((t==null?void 0:t.id)??-1))??!1,[r,t]),w=a.useMemo(()=>t?n.filter(s=>s.category===t.category&&s.id!==t.id).slice(0,4):[],[t,n]),k=a.useMemo(()=>{if(t)return g.find(s=>s.id===t.id)},[g,t]),y=k?k.quantity:0;if(!t)return e.jsx("div",{className:"text-center py-20 animate-fade-in container mx-auto px-6",children:e.jsxs("div",{className:"glass-card p-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:"Product not found!"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-200 mt-4",children:"The product you are looking for might be out of stock or the link is incorrect."}),e.jsx(S,{to:"/shop",className:"mt-8 inline-block bg-orange-500 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-orange-600 transition-colors",children:"Back to Shop"})]})});const L=()=>{p(!0),A(t),setTimeout(()=>p(!1),1e3)},D=()=>{if(!b){R("/login");return}h?I(t.id):P(t.id)},W=s=>{if(s.preventDefault(),c===0){o("Please select a star rating.");return}if(!x.trim()){o("Please write a comment for your review.");return}if(!r){o("You must be logged in to post a review.");return}const l={id:Date.now(),author:r.name,rating:c,comment:x,date:new Date().toISOString()};M(t.id,l),f(0),v(""),o("")},C=({rating:s,className:l="w-5 h-5"})=>e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((B,d)=>e.jsx("svg",{className:`${l} ${d<Math.round(s)?"text-yellow-400":"text-slate-300 dark:text-slate-600"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},d))}),$=()=>{const[s,l]=a.useState(0);return e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((B,d)=>{const i=d+1;return e.jsx("button",{type:"button",onMouseEnter:()=>l(i),onMouseLeave:()=>l(0),onClick:()=>f(i),className:"text-3xl transition-transform transform hover:scale-125","aria-label":`Rate ${i} star${i>1?"s":""}`,children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${i<=(s||c)?"text-yellow-400":"text-slate-300 dark:text-slate-600"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},i)})})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container mx-auto px-6 py-12 animate-fade-in",children:[e.jsxs("div",{className:"glass-card overflow-hidden lg:flex",children:[e.jsx("div",{className:"lg:w-1/2 p-4",children:e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-auto object-cover rounded-lg"})}),e.jsxs("div",{className:"p-8 lg:w-1/2 flex flex-col",children:[e.jsxs("div",{children:[m&&e.jsx("img",{src:m.logoUrl,alt:m.name,className:"h-8 mb-2"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-slate-800 dark:text-white",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(C,{rating:t.rating}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-300",children:["(",t.reviews.length," reviews)"]})]}),e.jsxs("p",{className:"text-4xl font-bold text-slate-800 dark:text-white my-4",children:["à§³",t.price]}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:t.description})]}),e.jsxs("div",{className:"mt-6 bg-slate-100/50 dark:bg-slate-800/50 p-4 rounded-lg",children:[e.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-200",children:"Auto-Ship Subscription"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Never run out! Get this item delivered automatically and save 5%."}),e.jsx("button",{className:"mt-2 text-sm font-bold text-orange-600 hover:underline",children:"Learn More"})]}),e.jsxs("div",{className:"mt-8 flex items-center space-x-4",children:[e.jsxs("button",{onClick:L,disabled:j,className:"w-full bg-orange-500 text-white font-bold py-4 px-6 rounded-lg text-lg hover:bg-orange-600 transition-all duration-300 flex items-center justify-center space-x-3 disabled:bg-green-500",children:[e.jsx(F,{className:"w-6 h-6"}),e.jsx("span",{children:j?"Added!":y>0?`Add More (${y} in Cart)`:"Add to Cart"})]}),e.jsx("button",{onClick:D,className:`p-4 rounded-lg transition-colors border-2 
                        ${h?"bg-red-500 border-red-500 text-white":"bg-transparent border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-red-500/10 hover:border-red-500/20"}`,"aria-label":h?"Remove from Wishlist":"Add to Wishlist",children:e.jsx(O,{className:"w-6 h-6"})})]})]})]}),e.jsxs("div",{className:"glass-card mt-12 p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6",children:"Customer Reviews"}),b&&r?e.jsx("form",{onSubmit:W,className:"mb-8 p-6 bg-slate-100/50 dark:bg-slate-800/50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("img",{src:r.profilePictureUrl,alt:r.name,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Write a review"}),e.jsx("div",{className:"my-2",children:e.jsx($,{})}),e.jsx("textarea",{value:x,onChange:s=>v(s.target.value),placeholder:"Share your thoughts about this product...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white/50 dark:bg-slate-700/50",rows:3,required:!0}),N&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N}),e.jsx("button",{type:"submit",className:"mt-2 bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600",children:"Submit Review"})]})]})}):e.jsx("div",{className:"mb-8 p-6 bg-slate-100/50 dark:bg-slate-800/50 rounded-lg text-center",children:e.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:[e.jsx(S,{to:"/login",className:"text-orange-600 hover:underline",children:"Log in"})," ","to share your thoughts and write a review."]})}),t.reviews.length>0?e.jsx("div",{className:"space-y-6",children:t.reviews.map(s=>e.jsxs("div",{className:"border-b border-white/20 dark:border-slate-700/50 pb-4 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(C,{rating:s.rating}),e.jsx("p",{className:"ml-3 font-bold text-slate-700 dark:text-slate-200",children:s.author})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:new Date(s.date).toLocaleDateString()}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:s.comment})]},s.id))}):e.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-center",children:"No reviews yet. Be the first to write one!"})]}),w.length>0&&e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-slate-800 dark:text-white mb-8",children:"You Might Also Like"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-8",children:w.map(s=>e.jsx(U,{product:s},s.id))})]})]})})};export{K as default};
